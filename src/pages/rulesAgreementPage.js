import { useEffect, useState } from 'react';
import { supabase } from '../supabaseClient';
import { useNavigate } from 'react-router-dom';

export default function RulesAgreementPage() {
  const [userId, setUserId] = useState(null);
  const navigate = useNavigate();

  useEffect(() => {
    const getUser = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      if (user) setUserId(user.id);
    };
    getUser();
  }, []);

  const handleAgree = async () => {
    await supabase
      .from('profiles')
      .update({ agreed_to_rules: true })
      .eq('id', userId);
    navigate('/');
  };

  const handleDisagree = async () => {
    alert("–¢–∞ –¥“Ø—Ä–º–∏–π–≥ –∑”©–≤—à”©”©—Ä”©”©–≥“Ø–π —Ç—É–ª –∞—à–∏–≥–ª–∞—Ö –±–æ–ª–æ–º–∂–≥“Ø–π.");
    await supabase.auth.signOut();
    navigate('/');
  };

  return (
    <div style={{ padding: 20, maxWidth: 800, margin: '0 auto' }}>
      <h2>üìú –ì—Ä“Ø–ø–ø–∏–π–Ω “Æ–Ω–¥—Å—ç–Ω –î“Ø—Ä—ç–º</h2>
      <pre style={{ whiteSpace: 'pre-wrap', background: '#f9f9f9', padding: 20, borderRadius: 10, maxHeight: 500, overflowY: 'auto' }}>
{`–ì—Ä“Ø–ø–ø–∏–π–Ω “Æ–Ω–¥—Å—ç–Ω –¥“Ø—Ä—ç–º

–ó”©—Ä—á–≤”©–ª —Ö—ç—Ä –∞–π–º–∞—Ä –∑”©—Ä—á—Å”©–Ω”©”©—Å –Ω—å —Ö–∞–º–∞–∞—Ä–∞–∞–¥ 1 –∞–Ω—Ö–∞–∞—Ä—É—É–ª–≥–∞ ”©–≥–Ω”© 
–ù—ç–≥ –∞–Ω—Ö–∞–∞—Ä—É—É–ª–≥–∞ –∞–≤—Å–∞–Ω–¥–∞–∞ –¥—É—Ä–≥“Ø–π –±–∞–π–≤–∞–ª —à“Ø“Ø–ª—Ç—ç–Ω–¥ –¥—É—É–¥–∞–∂ –±–æ–ª–Ω–æ
3 –∞–Ω—Ö–∞–∞—Ä—É—É–ª–≥–∞ –∞–≤–±–∞–ª –≥—Ä“Ø–ø–ø—ç—ç—Å —Ö”©”©–Ω”©! –≠—Å–≤—ç–ª –æ–Ω–æ–æ–Ω–æ–æ—Å –Ω—å 50 –∏–π–≥ —Ö–∞—Å–Ω–∞.

–≠–ù–ì–ò–ô–ù –î“Æ–†–ú“Æ“Æ–î
1. –•–∞—Ä–∞–∞–ª —Ö—ç–ª–∂ –±–æ–ª–Ω–æ –≥—ç—Ö–¥—ç—ç –±“Ø“Ø—Ä –∞–π–º–∞—Ä2 —Ö–∞—Ä–∞–∞–ª —Ö—ç–ª—ç—Ö–≥“Ø–π.
2. –•—ç—Ä“Ø“Ø–ª ”©–¥”©”©—Ö–≥“Ø–π —Ç–∞–π–≤–∞–Ω –±–∞–π—Ö.
3. –°–æ–Ω–∏–Ω2 +18 —ç–¥—Ä —è—Ä–∏—Ö–≥“Ø–π –±–∞–π—Ö.
4. –•“Ø–Ω–∏–π —ç—Ä—Ö—ç–Ω–¥ —Ö–∞–ª–¥–∞—Ö–≥“Ø–π –±–∞–π—Ö.
5. –ù—ç–≥–Ω–∏–π–≥—ç—ç –∞—Ä–∞–∞—Ä –Ω—å –º—É—É–ª–∞—Ö–≥“Ø–π –±–∞–π—Ö.

–ë–û–õ–ó–û–ñ –ë–ê–ô–• “Æ–ï–ò–ô–ù –ó“Æ–ô–õ–°
1. –ë–æ–ª–∑–æ–æ–Ω—ã –¥–∞–∞–ª–≥–∞–≤—Ä–∞–∞ –±–∏–µ–ª“Ø“Ø–ª—ç—ç–≥“Ø–π –±–∞–π–∂ –±–æ–ª–∑–æ–æ–≥–æ–æ –¥—É—É—Å–≥–∞—Ö.
2. –ë–æ–ª–∑–æ–∂ –±–∞–π–≥–∞–∞ —Ö“Ø–Ω–¥—ç—ç —Å—ç—Ç–≥—ç–ª—ç—ç—Å—ç—ç —Ö–∞–Ω–¥–∞—Ö.

–†–ï–ü–û–†–¢–¢–û–ô –•–û–õ–ë–û–û–¢ –î“Æ–†–ú“Æ“Æ–î
1. –°–∞–Ω–∞–∞–Ω–¥–∞–≥–≥“Ø–π —Ä–µ–ø–æ—Ä—Ç–ª–æ—á–∏—Ö–ª–æ–æ –≥—ç–≤—ç–ª -1 christma.
2. –•—É–¥–ª–∞–∞ —Ç–æ–≥–ª–æ–∂ —Ä–µ–ø–æ—Ä—Ç —è–≤—É—É–ª—Å–∞–Ω –±–æ–ª -3 christma.
3. –•—ç—Ä—ç–≤ —á–∏ ”©”©—Ä–∏–π–Ω—Ö”©”© –±—É—Ä—É—É–≥–∞–∞—Å –±–æ–ª–∂ —Ä–µ–ø–æ—Ä—Ç–ª—É—É–ª–≤–∞–ª 1 –∞–Ω—Ö–∞–∞—Ä—É—É–ª–≥–∞.
4. –†–µ–ø–æ—Ä—Ç –±–∞—Ç–∞–ª–≥–∞–∞ –Ω—å –≥—Ä“Ø–ø–ø –¥—ç—ç—Ä –±–∞–π—Ö —ë—Å—Ç–æ–π.
5. –†–µ–ø–æ—Ä—Ç–ª—É—É–ª—Å–∞–Ω –±–æ–ª —è–Ω–∑ –±“Ø—Ä –±–æ–ª–æ—Ö–≥“Ø–π.

–ë–ê–ù-–¢–ê–ô –•–û–õ–ë–û–û–¢–û–ô –î“Æ–†–ú“Æ“Æ–î
1. –ë–∞–Ω–¥—É—É–ª—Å–∞–Ω –±–æ–ª —Ç–∏–π—Ä—ç—Ö–≥“Ø–π —à“Ø“Ø.
2. –≠—Ö–Ω–∏–π –≥—É—Ä–∞–≤ –Ω—ç–≥ —É–¥–∞–∞–¥–∞–∞ 3 –¥–∞–∞–ª–≥–∞–≤–∞—Ä –ª ”©–≥—á –±–æ–ª–Ω–æ.
3. –î–∞–∞–ª–≥–∞–≤–∞—Ä ”©–≥”©—Ö–¥”©”© +18 —ç–¥—Ä ”©–≥”©—Ö–≥“Ø–π.
4. 24 —Ü–∞–≥–∏–π–Ω –¥–∞—Ä–∞–∞ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä –≥–∞—Ä–Ω–∞.

–≠–•–ù–ò–ô –ì–£–†–í–´–ù –ê–®–ò–ì–£–£–î
1. –ë–æ–ª–∑–æ–æ–Ω—ã —Å–∞–Ω–∞–ª –¥–∞–º–∂—É—É–ª–∞—Ö–∞–¥ 10 –æ–Ω–æ–æ.
2. –≠—Ö–Ω–∏–π –≥—É—Ä–∞–≤ —Ç—É—Å–¥–∞–∞ –≥—Ä“Ø–ø–ø—Ç—ç–π.
3. –ë–∏–µ –¥–∞–∞–Ω –±–∞–Ω–¥–∞–∂ –±–æ–ª–Ω–æ.
4. –î–∞–∞–ª–≥–∞–≤–∞—Ä ”©–≥”©—Ö–¥”©”© –∑–∞–∞–≤–∞–ª –∑”©–≤—à–∏–ª—Ü”©—Ö –∞–ª–±–∞–≥“Ø–π.
5. –•–∞–º—Ç–∞—Ä—á —Ö“Ø–Ω —Ö”©”©–∂ –±–æ–ª–Ω–æ ‚Äî cooldown 7 —Ö–æ–Ω–æ–≥.
6. –ë–æ–ª–∑–æ–æ —Å–∞–Ω–∞–ª –æ—Ä—É—É–ª–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.

–•“Æ–ù –ù–≠–ú–≠–•–î–≠–≠
1. –ì—Ä“Ø–ø–ø–∏–π–Ω —É—á—Ä—ã–≥ —Ç–∞–π–ª–±–∞—Ä–ª–∞–∂ –Ω—ç–º–Ω—ç.
2. –ù—ç–º—ç—Ö —Ö“Ø–Ω –Ω—å Web –¥—ç—ç—Ä –±“Ø—Ä—Ç–≥“Ø“Ø–ª—ç—Ö.
3. –≠–Ω—ç –¥“Ø—Ä–º“Ø“Ø–¥–∏–π–≥ –∑–∞–∞–≤–∞–ª —É–Ω—à—É—É–ª–∞—Ö.`}
      </pre>
      <div style={{ marginTop: 20 }}>
        <button onClick={handleAgree} style={{ marginRight: 10 }}>‚úÖ –ë–∏ –∑”©–≤—à”©”©—Ä—á –±–∞–π–Ω–∞</button>
        <button onClick={handleDisagree}>‚ùå –ó”©–≤—à”©”©—Ä”©—Ö–≥“Ø–π</button>
      </div>
    </div>
  );
}
